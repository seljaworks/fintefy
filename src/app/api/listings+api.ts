import { ListingItem } from "@/constants/types";

const COINMARKETCAP_API_KEY = process.env.COINMARKETCAP_API_KEY!;

export async function GET(request: Request) {
  const url = new URL(request.url);

  const currencyIDR = "2794";

  const limit = url.searchParams.get("limit") || 5;
  try {
    // const response = await fetch(
    //   `https://pro-api.coinmarketcap.com/v1/cryptocurrency/listings/latest?start=1&limit=${limit}&convert_id=${currencyIDR}`,
    //   {
    //     headers: {
    //       "X-CMC_PRO_API_KEY": COINMARKETCAP_API_KEY,
    //     },
    //   }
    // );

    const res = result;

    return Response.json(res);
  } catch (ex) {
    return Response.json({
      error: "Error when fetching the data",
    });
  }
}

const result: ListingItem[] = [
  {
    id: 1,
    name: "Bitcoin",
    symbol: "BTC",
    slug: "bitcoin",
    num_market_pairs: 12253,
    date_added: "2010-07-13T00:00:00.000Z",
    tags: [
      "mineable",
      "pow",
      "sha-256",
      "store-of-value",
      "state-channel",
      "coinbase-ventures-portfolio",
      "three-arrows-capital-portfolio",
      "polychain-capital-portfolio",
      "binance-labs-portfolio",
      "blockchain-capital-portfolio",
      "boostvc-portfolio",
      "cms-holdings-portfolio",
      "dcg-portfolio",
      "dragonfly-capital-portfolio",
      "electric-capital-portfolio",
      "fabric-ventures-portfolio",
      "framework-ventures-portfolio",
      "galaxy-digital-portfolio",
      "huobi-capital-portfolio",
      "alameda-research-portfolio",
      "a16z-portfolio",
      "1confirmation-portfolio",
      "winklevoss-capital-portfolio",
      "usv-portfolio",
      "placeholder-ventures-portfolio",
      "pantera-capital-portfolio",
      "multicoin-capital-portfolio",
      "paradigm-portfolio",
      "bitcoin-ecosystem",
      "layer-1",
      "ftx-bankruptcy-estate",
      "2017-2018-alt-season",
      "us-strategic-crypto-reserve",
      "binance-ecosystem",
      "binance-listing",
    ],
    max_supply: 21000000,
    circulating_supply: 19891256,
    total_supply: 19891256,
    infinite_supply: false,
    platform: null,
    cmc_rank: 1,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2025-07-12T07:59:00.000Z",
    quote: {
      "2794": {
        price: 1911187425.2175,
        volume_24h: 1.05189369045567e15,
        volume_change_24h: -44.7178,
        percent_change_1h: -0.16584937,
        percent_change_24h: 0.11156291,
        percent_change_7d: 8.97282467,
        percent_change_30d: 9.41173628,
        percent_change_60d: 14.68644197,
        percent_change_90d: 39.52496386,
        market_cap: 38015918338982104,
        market_cap_dominance: 63.7377,
        fully_diluted_market_cap: 40134935929567380,
        tvl: null,
        last_updated: "2025-07-12T07:58:00.000Z",
      },
    },
  },
  {
    id: 1027,
    name: "Ethereum",
    symbol: "ETH",
    slug: "ethereum",
    num_market_pairs: 10386,
    date_added: "2015-08-07T00:00:00.000Z",
    tags: [
      "pos",
      "smart-contracts",
      "ethereum-ecosystem",
      "coinbase-ventures-portfolio",
      "three-arrows-capital-portfolio",
      "polychain-capital-portfolio",
      "binance-labs-portfolio",
      "blockchain-capital-portfolio",
      "boostvc-portfolio",
      "cms-holdings-portfolio",
      "dcg-portfolio",
      "dragonfly-capital-portfolio",
      "electric-capital-portfolio",
      "fabric-ventures-portfolio",
      "framework-ventures-portfolio",
      "hashkey-capital-portfolio",
      "kenetic-capital-portfolio",
      "huobi-capital-portfolio",
      "alameda-research-portfolio",
      "a16z-portfolio",
      "1confirmation-portfolio",
      "winklevoss-capital-portfolio",
      "usv-portfolio",
      "placeholder-ventures-portfolio",
      "pantera-capital-portfolio",
      "multicoin-capital-portfolio",
      "paradigm-portfolio",
      "ethereum-pow-ecosystem",
      "layer-1",
      "ftx-bankruptcy-estate",
      "sora-ecosystem",
      "rsk-rbtc-ecosystem",
      "world-liberty-financial-portfolio",
      "us-strategic-crypto-reserve",
      "binance-ecosystem",
      "binance-listing",
    ],
    max_supply: null,
    circulating_supply: 120715200.353071,
    total_supply: 120715200.353071,
    infinite_supply: true,
    platform: null,
    cmc_rank: 2,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2025-07-12T07:59:00.000Z",
    quote: {
      "2794": {
        price: 48109621.0857377,
        volume_24h: 481531249495492,
        volume_change_24h: -21.6826,
        percent_change_1h: 0.07836375,
        percent_change_24h: -0.42517146,
        percent_change_7d: 17.57380066,
        percent_change_30d: 8.11817878,
        percent_change_60d: 20.45022616,
        percent_change_90d: 83.73697938,
        market_cap: 5807562548275147,
        market_cap_dominance: 9.737,
        fully_diluted_market_cap: 5807562548275172,
        tvl: null,
        last_updated: "2025-07-12T07:58:00.000Z",
      },
    },
  },
  {
    id: 52,
    name: "XRP",
    symbol: "XRP",
    slug: "xrp",
    num_market_pairs: 1646,
    date_added: "2013-08-04T00:00:00.000Z",
    tags: [
      "medium-of-exchange",
      "enterprise-solutions",
      "xrp-ecosystem",
      "arrington-xrp-capital-portfolio",
      "galaxy-digital-portfolio",
      "a16z-portfolio",
      "pantera-capital-portfolio",
      "ftx-bankruptcy-estate",
      "2017-2018-alt-season",
      "klaytn-ecosystem",
      "made-in-america",
      "us-strategic-crypto-reserve",
      "binance-ecosystem",
      "binance-listing",
    ],
    max_supply: 100000000000,
    circulating_supply: 59131625363,
    total_supply: 99985946231,
    infinite_supply: false,
    platform: null,
    cmc_rank: 3,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2025-07-12T07:58:00.000Z",
    quote: {
      "2794": {
        price: 44886.748698265,
        volume_24h: 262814235591345,
        volume_change_24h: 120.9321,
        percent_change_1h: -0.97538457,
        percent_change_24h: 7.28860947,
        percent_change_7d: 24.30799475,
        percent_change_30d: 23.56053736,
        percent_change_60d: 10.66633402,
        percent_change_90d: 28.88790639,
        market_cap: 2654226407788932,
        market_cap_dominance: 4.4501,
        fully_diluted_market_cap: 4.48867486982653e15,
        tvl: null,
        last_updated: "2025-07-12T07:58:00.000Z",
      },
    },
  },
  {
    id: 825,
    name: "Tether USDt",
    symbol: "USDT",
    slug: "tether",
    num_market_pairs: 136333,
    date_added: "2015-02-25T00:00:00.000Z",
    tags: [
      "stablecoin",
      "asset-backed-stablecoin",
      "usd-stablecoin",
      "ethereum-pow-ecosystem",
      "fiat-stablecoin",
      "tron20-ecosystem",
      "rsk-rbtc-ecosystem",
      "world-liberty-financial-portfolio",
      "binance-ecosystem",
      "binance-listing",
      "peaq-ecosystem",
      "apertum-ecosystem",
    ],
    max_supply: null,
    circulating_supply: 159085671680.095,
    total_supply: 161819508500.508,
    platform: {
      id: 1027,
      name: "Ethereum",
      symbol: "ETH",
      slug: "ethereum",
      token_address: "0xdac17f958d2ee523a2206206994597c13d831ec7",
    },
    infinite_supply: true,
    cmc_rank: 4,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2025-07-12T07:58:00.000Z",
    quote: {
      "2794": {
        price: 16237.4768972492,
        volume_24h: 1.94752218547653e15,
        volume_change_24h: -16.9763,
        percent_change_1h: 0.00394978,
        percent_change_24h: 0.01289586,
        percent_change_7d: 0.00403635,
        percent_change_30d: 0.05988456,
        percent_change_60d: 0.0510353,
        percent_change_90d: 0.05881007,
        market_cap: 2.58314991858891e15,
        market_cap_dominance: 4.3309,
        fully_diluted_market_cap: 2627540530801181,
        tvl: null,
        last_updated: "2025-07-12T07:58:00.000Z",
      },
    },
  },
  {
    id: 1839,
    name: "BNB",
    symbol: "BNB",
    slug: "bnb",
    num_market_pairs: 2616,
    date_added: "2017-07-25T00:00:00.000Z",
    tags: [
      "marketplace",
      "centralized-exchange",
      "payments",
      "smart-contracts",
      "alameda-research-portfolio",
      "multicoin-capital-portfolio",
      "bnb-chain-ecosystem",
      "layer-1",
      "alleged-sec-securities",
      "celsius-bankruptcy-estate",
      "binance-ecosystem",
      "binance-listing",
    ],
    max_supply: null,
    circulating_supply: 139289397.19,
    total_supply: 139289397.19,
    infinite_supply: false,
    platform: null,
    cmc_rank: 5,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2025-07-12T07:59:00.000Z",
    quote: {
      "2794": {
        price: 11257026.586528,
        volume_24h: 33600325867742.9,
        volume_change_24h: -9.7784,
        percent_change_1h: -0.09668748,
        percent_change_24h: 1.19843304,
        percent_change_7d: 5.9410112,
        percent_change_30d: 3.9481777,
        percent_change_60d: 6.73596043,
        percent_change_90d: 16.95911688,
        market_cap: 1567984447389293,
        market_cap_dominance: 2.6289,
        fully_diluted_market_cap: 1.56798444738935e15,
        tvl: null,
        last_updated: "2025-07-12T07:58:00.000Z",
      },
    },
  },
];
